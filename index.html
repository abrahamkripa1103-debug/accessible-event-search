<!DOCTYPE html>
<html lang="en-AU">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Accessible Event Search</title>
    <link rel="stylesheet" href="accessible-event-search.css" />
</head>
<body>
<div class="container">
    <header role="banner">
        <h1>Event Search</h1>
        <p class="lede">Search by <strong>event name</strong> and <strong>event date</strong>.</p>
        <div class="toolbar" role="group" aria-label="Assistive controls">
            <div class="listen-wrap">
                <button id="listenMenuBtn" class="btn secondary segment-left" aria-haspopup="true" aria-controls="listenMenu" aria-expanded="false" aria-label="Open menu">‚ò∞</button>
                <button id="listenMainBtn" class="btn secondary segment-mid" aria-label="Listen">üîà Listen</button>
                <button id="listenPlayBtn" class="btn play segment-right" aria-label="Play">‚ñ∂</button>
                <div id="listenMenu" class="listen-menu" role="menu" aria-hidden="true">
                    <div class="menu-item" role="menuitem">
                        <span class="menu-label">Keyboard Mode</span>
                        <span id="swKb" class="switch" role="switch" aria-checked="false" tabindex="0"><span class="knob"></span></span>
                    </div>
                    <div class="menu-item" role="menuitem">
                        <span class="menu-label">Click and Listen</span>
                        <span id="swListen" class="switch" role="switch" aria-checked="false" tabindex="0"><span class="knob"></span></span>
                    </div>
                    <div class="menu-item" role="menuitem">
                        <span class="menu-label">Enlarge Text</span>
                        <span id="swEnlarge" class="switch" role="switch" aria-checked="false" tabindex="0"><span class="knob"></span></span>
                    </div>
                    <div class="menu-item" role="menuitem">
                        <span class="menu-label">Form Reading</span>
                        <span id="swForm" class="switch" role="switch" aria-checked="false" tabindex="0"><span class="knob"></span></span>
                    </div>
                    <div class="menu-sep" aria-hidden="true"></div>
                    <button id="miText" class="menu-item" role="menuitem"><span class="menu-label">Text Mode</span></button>
                    <button id="miMask" class="menu-item" role="menuitem">
                        <span class="menu-label">Page Mask</span>
                        <span class="menu-small">(‚Üë/‚Üì move, +/- size)</span>
                    </button>
                    <button id="miHelp" class="menu-item" role="menuitem">
                        <span class="menu-label">Help</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <main id="main" role="main">
        <form id="searchForm" role="search" aria-describedby="searchHelp">
            <fieldset>
                <legend>Search events</legend>
                <div class="grid">
                    <div class="field">
                        <label for="q">Event name</label>
                        <input id="q" name="q" type="text" autocomplete="off" placeholder="e.g. Carers Day Out" aria-describedby="qHelp" />
                        <div id="qHelp" class="assist">Search matches the event title.</div>
                    </div>
                    <div class="field">
                        <label for="date">Event date</label>
                        <input id="date" name="date" type="date" aria-describedby="dateHelp" />
                        <div id="dateHelp" class="assist">Pick a date (YYYY-MM-DD).</div>
                    </div>
                </div>
                <div class="toolbar" style="margin-top:.5rem">
                    <button type="submit" class="btn">Search</button>
                    <button type="button" id="clear" class="btn secondary">Clear</button>
                </div>
            </fieldset>
            <p id="searchHelp" class="assist">Use this form to filter events by name and/or a specific date.</p>
        </form>

        <div class="results-meta" aria-live="polite" aria-atomic="true">
            <div id="count" class="results-count">No results yet. Enter filters and press Search.</div>
            <div id="status" class="assist" role="status" aria-live="polite"></div>
        </div>

        <section aria-label="Search results">
            <ul id="results" class="list"></ul>
        </section>
    </main>

    <footer></footer>
</div>

<div id="ttsBar" role="region" aria-label="Listen controls" hidden>
    <button id="ttsPlay" class="tts-btn" aria-label="Play/Pause">‚ñ∂</button>
    <button id="ttsStop" class="tts-btn" aria-label="Stop">‚ñ†</button>
    <button id="ttsPrev" class="tts-btn" aria-label="Previous">‚èÆ</button>
    <button id="ttsNext" class="tts-btn" aria-label="Next">‚è≠</button>
    <div class="tts-group">
        <button id="ttsVolBtn" class="tts-btn" aria-label="Volume" aria-controls="ttsVol" aria-expanded="false">üîä</button>
        <input id="ttsVol" class="tts-range" type="range" min="0" max="1" step="0.1" value="1" hidden />
    </div>
    <div class="tts-group">
        <button id="ttsRateBtn" class="tts-btn" aria-label="Speech rate" aria-controls="ttsRate" aria-expanded="false">‚è±</button>
        <input id="ttsRate" class="tts-range" type="range" min="0.5" max="1.6" step="0.1" value="1" hidden />
    </div>
    <button id="ttsClose" class="tts-btn" aria-label="Close">‚úï</button>
</div>

<div id="textModal" role="dialog" aria-modal="true" aria-labelledby="textTitle" aria-hidden="true">
    <div class="text-dialog">
        <div class="text-toolbar">
            <h2 id="textTitle">Text mode</h2>
            <div class="grow"></div>
            <button id="textMinus" class="tts-btn" aria-label="Decrease text size">A‚àí</button>
            <button id="textPlus" class="tts-btn" aria-label="Increase text size">A+</button>
            <button id="textClose" class="tts-btn" aria-label="Close text mode">‚úï</button>
        </div>
        <div id="textModalContent" class="text-content" tabindex="0" aria-describedby="textHelp"></div>
        <p id="textHelp" class="sr-only">Text mode shows a simplified reading view. Press Escape to close.</p>
    </div>
</div>

<div id="helpModal" role="dialog" aria-modal="true" aria-labelledby="helpTitle" aria-hidden="true">
    <div class="text-dialog">
        <div class="text-toolbar">
            <h2 id="helpTitle">Help</h2>
            <div class="grow"></div>
            <button id="helpClose" class="tts-btn" aria-label="Close help">‚úï</button>
        </div>
        <div id="helpModalContent" class="text-content" tabindex="0">
            <h3>How to use this page</h3>
            <p>Use the form to filter events by <strong>event name</strong> and <strong>event date</strong>. Press <strong>Search</strong> to view results.</p>
            <h3>Keyboard shortcuts</h3>
            <ul>
                <li><strong>Shift + Ctrl + Alt + K</strong> ‚Äì Focus the Listen button</li>
                <li><strong>Shift + Ctrl + Alt + L</strong> ‚Äì Focus the player and start reading</li>
                <li><strong>Shift + Ctrl + Alt + P</strong> ‚Äì Pause / resume reading</li>
                <li><strong>Shift + Ctrl + Alt + X</strong> ‚Äì Stop reading</li>
            </ul>
            <h3>Tips</h3>
            <ul>
                <li>Use <em>Text Mode</em> for a simplified reading view.</li>
                <li>Turn on <em>Click and Listen</em> to hear any text you click.</li>
                <li>Use <em>Page Mask</em> to focus on part of the page (‚Üë/‚Üì move, +/- resize).</li>
            </ul>
        </div>
    </div>
</div>

<div id="pageMask" aria-hidden="true"></div>

<script defer src="app.js"></script>
</body>
</html>
